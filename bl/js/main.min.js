const databases={"Ny Carlsberg Glyptotek":{url:"https://arts.reindex.net/NCG/main/T.php?Ifm=Pz&format=short",anywhere:a=>"&qe="+a},"Det Kongelige Bibliotek":{url:"https://soeg.kb.dk/discovery/search?tab=Everything&search_scope=MyInst_and_CI&vid=45KBDK_KGL:KGL&offset=0",anywhere:a=>"&query=any,contains,"+a,author:a=>"&query=creator,contains,"+a,title:a=>"&query=title,contains,"+a},Nationalmuseet:{url:"https://mus.reindex.net/NAT/main/T.php?Ifm=Pz&format=short",anywhere:a=>"&qe="+a},Arken:{url:"https://arts.reindex.net/AMK/main/T.php?Ifm=Pz&format=short",anywhere:a=>"&qe="+a},"Syddansk Universitetsbibliotekt":{url:"https://syddansk.summon.serialssolutions.com/search?",anywhere:a=>"s.q="+a,author:a=>"q=(AuthorCombined:("+a+"))",title:a=>"q=(TitleCombined:("+a+"))"},"Ã…lborg Universitetsbibliotekt":{url:"https://kbdk-aub.primo.exlibrisgroup.com/discovery/search?tab=Everything&search_scope=MyInst_and_CI&vid=45KBDK_AUB:AUB",anywhere:a=>"&query=any,contains,"+a,author:a=>"&query=creator,contains,"+a,title:a=>"&query=title,contains,"+a},"Designmuseum Danmark":{url:"https://mus.reindex.net/DMD/main/T.php?Ifm=Pz&format=short",anywhere:a=>"&qe="+a},"Kongernes Samlinger":{url:"https://ext.kb.dk/F?func=find-b&adjacent=N&local_base=DRH01_alle",anywhere:a=>"&find_code=WRD&request="+a,author:a=>"&find_code=WFO&request="+a,title:a=>"&find_code=WTI&request="+a},"ARoS Kunstmuseums Bibliotek":{url:"https://ext.kb.dk/F?func=find-b&adjacent=N&local_base=aro01",anywhere:a=>"&find_code=WRD&request="+a,author:a=>"&find_code=WFO&request="+a,title:a=>"&find_code=WTI&request="+a}},highlight=a=>{a.classList.add("highlight"),setTimeout(()=>a.classList.remove("highlight"),300)},create_iframe=(a,b,c)=>{let d=document.createElement("div");d.className="database";let e=document.createElement("div");e.className="title",e.textContent=a;let f=document.createElement("div");f.className="frame";let g=document.createElement("iframe");g.src=b,f.appendChild(g),d.appendChild(e),d.appendChild(f),c.appendChild(d)},search=async(a,b)=>{let c=document.querySelector(".results");for(;c.firstChild;)c.removeChild(c.firstChild);for(let[d,e]of Object.entries(databases))create_iframe(d,e.url+(b in e?e[b]:e.anywhere)(a),c)},expand=a=>{let b=document.querySelectorAll(".expanded"),c=!Array.from(b).includes(a);b.forEach(a=>a.classList.remove("expanded")),c&&a&&a.classList.add("expanded")};document.getElementById("entry_search").addEventListener("click",async()=>{let a=document.getElementById("entry_query").value,b=document.getElementById("entry_category").value.toLowerCase();a?["author","title","anywhere"].includes(b)?(await search(encodeURIComponent(a),b),expand(document.querySelector(".database"))):highlight(document.getElementById("entry_category")):highlight(document.getElementById("entry_query"))}),document.getElementById("entry_query").addEventListener("keyup",a=>{"Enter"===a.key&&(a.preventDefault(),document.getElementById("entry_search").click())}),document.querySelector(".results").addEventListener("click",a=>a.target.closest("iframe")?"":expand(a.target.closest(".database")));
