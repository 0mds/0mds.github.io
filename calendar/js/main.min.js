const _=(e,t=document)=>t.querySelector(e),days_in_month=e=>(e.setMonth(e.getMonth()+1),e.setDate(0),e.getDate()),day_elem=e=>document.getElementById(date_string("string"==typeof e?new Date(e):e)),day_add_class=(e,t,a)=>{let d=day_elem(e);d&&(d.classList.add(t),a&&(d.title+=a+", "))},date_string=e=>date=[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"),shift=1,day=e=>(7+e.getDay()-1)%7;let year_offset=0;const data=[],today=new Date,draw_calender=()=>{for(entry of([_("#this_year"),_("#next_year")].forEach(((e,t)=>{let a=(d=new Date,new Date(d.setFullYear(d.getFullYear()+t+year_offset)));var d;a.setDate(1),_(".title",e).textContent=a.getFullYear(),_(".data",e).innerHTML="";for(let t in[...Array(12)]){a.setMonth(t);let d="",n=[],r=[...Array(day(a))].concat([...Array(days_in_month(new Date(a))).keys()].map((e=>{let t=new Date(a);return t.setDate(e+1),t})));for(;r.length;)n.push(r.splice(0,7));d='<div class="week">'+[...Array(7).keys()].map((e=>new Date(0,0,e+1).toLocaleString("default",{weekday:"short"}))).map((e=>"<div>"+e+"</div>")).join("")+"</div>";for(let e of n)d+='<div class="week">'+e.map((e=>e?`<div id="${e.toISOString().substr(0,10)}"`+(e<today?' class="date_past"':"")+">"+e.getDate()+"</div>":"<div></div>")).join("")+"</div>";_(".data",e).insertAdjacentHTML("beforeend",'<div class="month"><div class="title">'+a.toLocaleString("default",{month:"long"})+'</div><div class="data">'+d+"</div></div>")}})),day_add_class(today,"date_today"),data))if("travel"===entry.type){["start","end"].map((e=>day_add_class(entry[e],"date_travel",entry.label)));let e=new Date(entry.start);for(e.setDate(e.getDate()+1);e<new Date(entry.end);)day_add_class(e,"date_traveled",entry.label),e.setDate(e.getDate()+1)}else"trip"===entry.type?day_add_class(entry.date,"date_travel",entry.label):"event"===entry.type&&day_add_class(entry.date,"date_event",entry.label)},container=_(".container"),shift_calendar=e=>{year_offset+=e,container.style.transition="ease 0.5s",container.classList.add(e>0?"left":"right"),setTimeout((()=>{draw_calender(),container.style.transition="",container.classList.remove("right","left")}),500)};draw_calender();